<!doctype html>
<html lang="fr">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <title>Compteur d'invités - Gamebuino</title> 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> 
  <link href="https://fonts.googleapis.com/css?family=Lato|Open+Sans:300,400,600,700,800|Roboto+Mono:300,400,700" rel="stylesheet"> 
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-LRlmVvLKVApDVGuspQFnRQJjkv0P7/YFrw84YYQtmYG4nK8c+M+NlmYDCv0rKWpG" crossorigin="anonymous"> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"> 
  <link href="../css/animate.css" rel="stylesheet" type="text/css"> 
  <link href="../css/generic.css" rel="stylesheet" type="text/css"> 
  <link href="../css/jquery-ui.min.css" rel="stylesheet" type="text/css"> 
  <link href="../css/jquery-ui-timepicker-addon.css" rel="stylesheet" type="text/css"> 
  <link href="../css/alertify.core.css" rel="stylesheet" type="text/css"> 
  <link href="../css/alertify.default.css" rel="stylesheet" type="text/css"> 
  <link href="../css/select2.min.css" rel="stylesheet" type="text/css"> 
  <link href="../css/app.css" rel="stylesheet" type="text/css"> 
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> 
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> 
  <script src="../js/jquery.cookie.js" type="text/javascript"></script> 
  <script src="../js/alertify.min.js" type="text/javascript" async></script> 
  <script src="../js/modal.js" type="text/javascript" async></script> 
  <script src="../js/popupConfirm.js" type="text/javascript" async></script> 
  <script src="../js/select2.min.js" type="text/javascript" async></script> 
  <script src="../js/imagesloaded.pkgd.min.js" type="text/javascript" async></script> 
  <script src="../js/wow.min.js" type="text/javascript" async></script> 
  <script src="../js/app.js" type="text/javascript" async></script> 
  <script id="js_highlight" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" async></script> 
  <script>js_highlight.addEventListener('load',function(){$('div.code, pre').each(function(i,block){hljs.highlightBlock(block);});});</script> 
  <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700&amp;display=swap" rel="stylesheet"> 
 </head> 
 <body> 
  <div class="topbar-container w-100 m-0"> 
   <nav class="primary-navbar"> 
    <div id="root-logo"> <a href="/gamebuino/"> <img width="233" src="../assets/gamebuino-logo-white.svg" alt="Gamebuino" class="logo-white"> </a> 
    </div> 
    <ul class="nav nav-pills"> 
     <li class="text-uppercase"> <a href="/gamebuino/meta-api-reference-en/"> META API Reference</a></li> 
     <li class="text-uppercase"> <a href="/gamebuino/academy-fr/"> Academy (FR)</a></li> 
    </ul> 
   </nav> 
   <div class="container" id="main-content">
    <div class="container"> 
     <div class="d-flex align-items-center"> <a href="/gamebuino/academy-fr/" > Académie </a> 
      <div class="ml-3 mr-3"> <i class="fal fa-angle-right"></i> 
      </div> <a href="/gamebuino/academy-fr/make-your-very-first-games-with-pong.html"> Pong (C++ 2/5) </a> 
      <div class="ml-3 mr-3"> <i class="fal fa-angle-right"></i> 
      </div> <span> Compteur d'invités </span> 
     </div> 
    </div> 
    <div class="row"> 
     <div class="col-md-8"> 
      <div class="d-flex justify-content-between"> 
       <div> 
        <h1> Compteur d'invités </h1> 
        <h5> Étape 1 </h5> 
       </div> 
      </div> 
      <div class="mt-5 white-container"> 
       <div class="lesson-introduction"> 
        <p>Découvrez les <strong>variables</strong>, les structures conditionnelles <strong>si</strong> et l'affichage de <strong>rectangles</strong>.</p> 
       </div> 
       <div class="lesson-content mt-5"> 
        <h2>Faites un outil pour compter des invités, du stock ou des moutons</h2> 
        <p><strong>Durée</strong> 20 minutes (et plus si affinité)</p> 
        <p><strong>Niveau</strong> débutant total</p> 
        <p><strong>Prérequis</strong></p> 
        <ul> 
         <li>Avoir une <span>Gamebuino META</span> </li> 
         <li>Avoir fait l'atelier <span>Installation de la Gamebuino META</span> </li> 
         <li>Avoir fait l'atelier<span>hello, world</span> </li> 
        </ul> 
        <p>Notre objectif est de faire un petit compteur d'invités, qui ajoute +1 quand on appuie sur haut, et qui enlève 1 quand on appuie sur bas. On peut trouver ce type de compteur (habituellement mécanique) à l'entrée des événements pour compter le nombre d'entrées. On peut aussi retrouver un code similaire dans un jeu pour compter le nombre de mouvements d'un joueur par exemple. Il va donc falloir stocker la valeur du compteur dans une <strong>variable</strong> et la faire changer <strong>si</strong> on appuie sur les boutons.</p> 
        <h2>Les variables</h2> 
        <p>Vous partez du squelette de programme que nous venons de découvrir avec "hello, world", avec quelques modifications :</p> 
        <pre><code>#include &lt;Gamebuino-Meta.h&gt;

int counter = 0;  // Nouvelle ligne

void setup() {
  gb.begin();

}

void loop() {
  while (!gb.update());
  gb.display.clear();

  gb.display.print(counter);  // Quelque chose a changé ici :)
}
</code></pre> 
        <p>Regardons plus en détail les modifications que l'on a fait au programme :</p> 
        <p><code>int counter = 0;</code></p> 
        <p>Cette ligne <strong>déclare</strong> et <strong>initialise</strong> une variable que l'on affiche à l'écran dans <code>loop</code>:</p> 
        <p><code>counter</code> est une variable qui mémorise la valeur du compteur. Une variable est un espace dans la mémoire de la Gamebuino pour stocker temporairement une donnée. Il peut s'agir du score actuel, de l'image d'un personnage, du texte d'un dialogue ou encore l'ensemble de la carte d'un jeu de plateforme. Lorsque l'on éteint la console, la valeur est perdue.</p> 
        <p>On lui donne une <strong>valeur initiale</strong>, ici <code>0</code> avec l'opérateur <code>=</code>. Nous verrons plus tard comment sauvegarder des données sur la carte micro SD.</p> 
        <p>Une variable a un <strong>nom</strong>, ici on a choisi de prendre <code>counter</code>. Il faut un nom qui décrit bien ce à quoi elle sert pour que le code reste lisible. En utilisant des variables qui s'appellent <code>a</code>, <code>b</code> et <code>c</code>, on a vite fait de se mélanger les pinceaux.</p> 
        <p>Une variable contient un <strong>type</strong> de donnée. Ici c'est <code>int</code>, abréviation de <strong>integer</strong> en anglais, ce qui veut dire "entier". On peut donc y stocker un nombre sans virgule, positif ou négatif, comme 0, 1, 5 ou -34 par exemple.</p> 
        <p>Ici, l'instruction ne se situe pas dans une <strong>fonction</strong> (les fonctions sont délimitées par des <strong>accolades</strong> <code>{ }</code>). En effet, en C/C++ on peut placer des instructions hors des fonctions. Ces <strong>instructions</strong> seront lues et exécutées par la Gamebuino de haut en bas une fois au démarrage. Cependant, seules les <strong>instructions</strong> sont exécutées de cette manière (je vous rappelle que toutes instructions finissent par un point-virgule ;, et donc les <strong>fonctions</strong>, comme <code>setup</code> et <code>loop</code>, ne sont pas des <strong>instructions</strong>).</p> 
        <p><code>gb.display.print(counter);</code></p> 
        <p>On a déjà vu dans "hello, world" que <code>print</code> permet d'afficher une <strong>chaîne de caractères</strong>. Ce que l'on ne vous a pas dit, c'est qu'elle permet également d'afficher des variable comme des <strong>integer</strong>, par exemple. Dans notre cas, cette variable s'appelle <code>counter</code>.</p> 
        <h2>if - La structure conditionnelle</h2> 
        <p>Jusqu'ici rien ne bouge, ce n'est pas très palpitant. Comme son nom l'indique, une variable peut changer de valeur. Avant de commencer le code, je vais vous montrer la logique que l'on veut obtenir en <strong>pseudo-code</strong>. Ce n'est pas du code qui peut être compilé, mais il permet de facilement expliquer un algorithme :</p> 
        <pre><code>Si on appuie sur "haut" (UP)
Alors on ajoute 1 à "counter"

Si on appuie sur "bas" (DOWN)
Alors on enlève 1 à "counter"

Si on appuie sur "menu" (MENU)
Alors on met "counter" à 0
</code></pre> 
        <p>Ici, on cherche un algorithme qui fait simplement varier la valeur de <code>counter</code> avec les flèches HAUT et BAS. On veut aussi que le bouton MENU remette <code>counter</code> à zéro. Vous voyez, rien de compliqué ? Le <strong>si</strong> s'utilise comme ça en C++ :</p> 
        <pre><code>if (condition) {
  // Faire des choses
}
</code></pre> 
        <p>Les bilingues parmi vous auront remarqué que <strong>if</strong> veut dire <strong>si</strong>, ça tombe bien ;). Si la <strong>condition</strong> est vraie, alors on exécute toutes les instructions qui se trouvent entre les accolades <code>{ }</code>. Voilà comment ça se traduit en langage Gamebuino pour gérer l'appui sur le bouton 'HAUT'.</p> 
        <pre><code>#include &lt;Gamebuino-Meta.h&gt;

int counter = 0;

void setup() {
  gb.begin();

}

void loop() {
  while (!gb.update());
  gb.display.clear();

  if (gb.buttons.pressed(BUTTON_UP)) {  // Si on appuie sur "haut"
    counter = counter + 1;    // On ajoute 1 à "counter"
    gb.sound.playTick();    // On joue un son
  }  // Fin du si

  gb.display.print(counter);
  gb.display.fillRect(counter, 8, 2, 4);
}
</code></pre> 
        <p><img src="../assets/05fa1f79f4affb92e949cbc9e5bf72fe1ec686c2.gif" alt="" style="max-width:100%"></p> 
        <h2>À vous de jouer !</h2> 
        <p>Je vous laisse ajouter le code nécessaire pour que les boutons BAS et MENU remplissent leur rôle comme décrit dans le pseudo-code plus haut. Si vous avez un doute sur la syntaxe (l'orthographe du code), vous pouvez aller vérifier dans la <span>Référence</span>. Mais pour cette fois je suis sympa, je vous donne les noms des boutons qu'il vous faut : <code>BUTTON_DOWN</code> et <code>BUTTON_MENU</code>.</p> 
        <p><code>gb.sound.playTick();</code></p> 
        <p>J'en ai profité pour ajouter deux petites nouveautés. <code>gb.sound.playTick</code> permet de jouer un son prédéfini "tick". Comme on l'a mis dans la condition <code>if</code>, le son n'est joué que quand le bouton est appuyé.</p> 
        <p><code>gb.display.fillRect(x, y, w, h);</code></p> 
        <p>La fonction <code>gb.display.fillRect</code> permet de tracer un rectangle. Vous remarquerez qu'elle a plusieurs <strong>paramètres</strong> séparés par des virgules. Il est important d'avoir le bon nombre de paramètres et dans le bon ordre. Encore une fois, tout est détaillé dans la <span>Référence</span>, mais je vous explique rapidement :</p> 
        <ul> 
         <li> <code>x</code> est la coordonnée horizontale du rectangle, en partant de la gauche de l'écran. Dans notre cas, <code>counter</code>.</li> 
         <li> <code>y</code> est la coordonnée verticale du rectangle, en partant du haut de l'écran. Dans notre cas, 8, soit <code>8</code> pixels.</li> 
         <li> <code>w</code> est la largeur du rectangle en pixels, dans notre cas <code>2</code> </li> 
         <li> <code>h</code> est la hauteur du rectangle en pixels, dans notre cas <code>4</code> </li> 
        </ul> 
        <p>Il vous reste donc à ajouter la fonctionnalité des différents boutons, et surtout personnaliser votre compteur !<br> Pourquoi ne pas changer la position, la taille et la couleur du rectangle ?<br> Ou changer l'opération pour multiplier et diviser par 2 au lieu de faire +1 et -1 ?<br> Attention de partir de 1 dans ce cas, car 0 * 2 = 0 hehe</p> 
        <p><strong>Partagez vos créations sur les réseaux avec #gamebuino #tallycounter , on vous suit de près ;)</strong></p> 
        <h2>Remarques sur le C/C++</h2> 
        <p>Un ordinateur (comme votre Gamebuino) peut exécuter des instructions très rapidement, mais il le fait bêtement. Il va suivre tout ce que vous lui dites à la lettre, littéralement. Donc la syntaxe et la logique de chaque instruction est assez stricte. Il y a deux catégories d'erreurs: les erreurs de <strong>syntaxe</strong> et les erreurs de <strong>logique</strong>. Les erreurs de <strong>syntaxe</strong> sont détectées lors de la compilation, et donc vous ne pourrez pas charger votre programme. Les erreurs de <strong>logique</strong> ne seront pas détectées, donc votre programme compilera et votre Gamebuino l'exécutera. Mais le programme ne fera pas ce que vous vouliez.</p> 
        <p>Pour réparer les erreurs de <strong>syntaxe</strong>, on peut s'aider du texte en rouge qui nous est fournis lors de la compilation. Voici quelques exemples récurrents:</p> 
        <p><strong>Les accolades { }</strong></p> 
        <p><img src="../assets/b900a13663ed53d26327690b3a97eb8941c40d40.PNG" alt="" style="max-width:100%"></p> 
        <p>C'est une erreur qu'on retrouve beaucoup chez les débutants. Les accolades viennent toujours par paires. Il se peut que vous en oubliez une ou que vous en mettez une de trop, dans les deux cas, le compilateur ne sera pas content car il y aura une accolade qui est seule :(<br> Pour vous aidez, mettez votre curseur sur une accolade ouvrante, l'accolade qui la ferme sera encadrée automatiquement (et vise-versa).</p> 
        <p><strong>Rappel</strong>: les <strong>if</strong> et les <strong>fonctions</strong> doivent avoir des accolades.</p> 
        <p><strong>Le point-virgule ;</strong></p> 
        <p><img src="../assets/cf3a6833651c511974f93957e326da05b50c9b8a.PNG" alt="" style="max-width:100%"></p> 
        <p>Chaque instruction doit finir avec un point-virgule. Cette erreur est souvent facilement réparable.</p> 
        <p><strong>Si vous bloquez sur une erreur et que vous n'arrivez pas à la résoudre, venez demander un coup de main sur discord ;)</strong></p> 
        <h2>Exemple de solution</h2> 
        <p>Parmi l'infinité de compteurs possibles, voici le nôtre pour vous inspirer !</p> 
        <p><img src="../assets/ca029c72d017364a2f4c5aa3a3b03c15a1e7a2a8.gif" alt="" style="max-width:100%"></p> 
        <pre><code>#include &lt;Gamebuino-Meta.h&gt;
int counter = 0;


void setup() {
  gb.begin();
}


void loop() {
  while (!gb.update());
  gb.display.clear();


  if(gb.buttons.pressed(BUTTON_UP)){
    counter = counter + 1;
    gb.sound.playOK();
  }


  if(gb.buttons.pressed(BUTTON_DOWN)){
    counter = counter - 1;
    gb.sound.playCancel();
  }


  if(gb.buttons.pressed(BUTTON_MENU)){
    counter = 0;
    gb.sound.playTick();
  }


  gb.display.setColor(BROWN);
  gb.display.fillRect(0, 0, counter, gb.display.height());


  gb.display.setColor(WHITE);
  gb.display.setFontSize(4);
  gb.display.setCursor(8,8);
  gb.display.print(counter); 
}
</code></pre> 
        <p><strong>Vous êtes maintenant prêts à débuter votre jeu de Pong dans l'étape suivante !</strong></p> 
        <p><em>Par Aurélien Rodot, modifié par Julien Giovinazzo</em></p> 
        <p><a href="/gamebuino/academy-fr/bouncing-ball.html" title="Balle rebondissante" class="btn btn-primary btn-lg"> Etape suivante <i class="fa fa-arrow-right"></i></a></p>
       </div> 
      </div> 
     </div> 
     <div class="col-md-4 d-none d-md-block"> 
      <ul class="workshop-summary-mini"> 
       <li class=""> <a href="/gamebuino/academy-fr/hello-world.html" class="d-flex align-items-center  "> 
         <div class="circle">
           1 
         </div> 
         <div class="title ml-3">
           Hello, world 
         </div> </a></li> 
       <li class=""> <a href="/gamebuino/academy-fr/tally-counter.html" class="d-flex align-items-center  active  "> 
         <div class="circle">
           2 
         </div> 
         <div class="title ml-3">
           Compteur d'invités 
         </div> </a></li> 
       <li class=""> <a href="/gamebuino/academy-fr/bouncing-ball.html" class="d-flex align-items-center  "> 
         <div class="circle">
           3 
         </div> 
         <div class="title ml-3">
           Balle rebondissante 
         </div> </a></li> 
       <li class=""> <a href="/gamebuino/academy-fr/pong.html" class="d-flex align-items-center  "> 
         <div class="circle">
           4 
         </div> 
         <div class="title ml-3">
           Pong 
         </div> </a></li> 
       <li class=""> <a href="/gamebuino/academy-fr/artificial-intelligence.html" class="d-flex align-items-center  "> 
         <div class="circle">
           5 
         </div> 
         <div class="title ml-3">
           Intelligence artificielle 
         </div> </a></li> 
      </ul> 
     </div> 
    </div> 
    <div class="d-block d-md-none" style="margin-top:8rem"> 
     <h4 class="mb-4">Étapes</h4> 
     <ul class="workshop-summary-mini"> 
      <li class=""> <a href="/gamebuino/academy-fr/hello-world.html" class="d-flex align-items-center  "> 
        <div class="circle">
          1 
        </div> 
        <div class="title ml-3">
          Hello, world 
        </div> </a></li> 
      <li class=""> <a href="/gamebuino/academy-fr/tally-counter.html" class="d-flex align-items-center  active  "> 
        <div class="circle">
          2 
        </div> 
        <div class="title ml-3">
          Compteur d'invités 
        </div> </a></li> 
      <li class=""> <a href="/gamebuino/academy-fr/bouncing-ball.html" class="d-flex align-items-center  "> 
        <div class="circle">
          3 
        </div> 
        <div class="title ml-3">
          Balle rebondissante 
        </div> </a></li> 
      <li class=""> <a href="/gamebuino/academy-fr/pong.html" class="d-flex align-items-center  "> 
        <div class="circle">
          4 
        </div> 
        <div class="title ml-3">
          Pong 
        </div> </a></li> 
      <li class=""> <a href="/gamebuino/academy-fr/artificial-intelligence.html" class="d-flex align-items-center  "> 
        <div class="circle">
          5 
        </div> 
        <div class="title ml-3">
          Intelligence artificielle 
        </div> </a></li> 
     </ul> 
    </div>
   </div> 
   <footer id="footer"> 
    <div class="container"> 
     <div class="reinsurance"> 
      <div class="row align-items-center"> 
       <div class="col-sm-3"> 
        <p class="text-left"></p> 
       </div> 
       <div class="col-sm-6"> 
        <p class="text-center">Academy saved on October 8, 2020</p> 
       </div> 
       <div class="col-sm-3"> 
        <p class="text-right"></p> 
       </div> 
      </div> 
     </div> 
     <div class="row"> 
      <div class="col-sm-4 margeur-50"> 
       <ul class=""> 
        <li class="margeur-20"><h5 style="color:white;">Exported by :</h5></li> 
        <li> <a href="https://chris-scientist.github.io">chris-scientist</a></li> 
       </ul> 
      </div> 
      <div class="col-sm-4 margeur-50"> 
       <ul class=""> 
        <li class="margeur-10"> <a href="/gamebuino/why-this-website/">Why this website ?</a></li> 
        <li class="margeur-10"> <a href="/gamebuino/contact/">Contact</a></li> 
       </ul> 
      </div> 
      <div class="col-sm-4 margeur-50"> 
       <h6 class="footer-h6">Exported from official website</h6> 
      </div> 
     </div> 
    </div> 
   </footer>  
  </div>
 </body>
</html>