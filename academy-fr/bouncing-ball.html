<!doctype html>
<html lang="fr">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <title>Balle rebondissante - Gamebuino</title> 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> 
  <link href="https://fonts.googleapis.com/css?family=Lato|Open+Sans:300,400,600,700,800|Roboto+Mono:300,400,700" rel="stylesheet"> 
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-LRlmVvLKVApDVGuspQFnRQJjkv0P7/YFrw84YYQtmYG4nK8c+M+NlmYDCv0rKWpG" crossorigin="anonymous"> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"> 
  <link href="../css/animate.css" rel="stylesheet" type="text/css"> 
  <link href="../css/generic.css" rel="stylesheet" type="text/css"> 
  <link href="../css/jquery-ui.min.css" rel="stylesheet" type="text/css"> 
  <link href="../css/jquery-ui-timepicker-addon.css" rel="stylesheet" type="text/css"> 
  <link href="../css/alertify.core.css" rel="stylesheet" type="text/css"> 
  <link href="../css/alertify.default.css" rel="stylesheet" type="text/css"> 
  <link href="../css/select2.min.css" rel="stylesheet" type="text/css"> 
  <link href="../css/app.css" rel="stylesheet" type="text/css"> 
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> 
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> 
  <script src="../js/jquery.cookie.js" type="text/javascript"></script> 
  <script src="../js/alertify.min.js" type="text/javascript" async></script> 
  <script src="../js/modal.js" type="text/javascript" async></script> 
  <script src="../js/popupConfirm.js" type="text/javascript" async></script> 
  <script src="../js/select2.min.js" type="text/javascript" async></script> 
  <script src="../js/imagesloaded.pkgd.min.js" type="text/javascript" async></script> 
  <script src="../js/wow.min.js" type="text/javascript" async></script> 
  <script src="../js/app.js" type="text/javascript" async></script> 
  <script id="js_highlight" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" async></script> 
  <script>js_highlight.addEventListener('load',function(){$('div.code, pre').each(function(i,block){hljs.highlightBlock(block);});});</script> 
  <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700&amp;display=swap" rel="stylesheet"> 
 </head> 
 <body> 
  <div class="topbar-container w-100 m-0"> 
   <nav class="primary-navbar"> 
    <div id="root-logo"> <a href="/gamebuino/"> <img width="233" src="../assets/gamebuino-logo-white.svg" alt="Gamebuino" class="logo-white"> </a> 
    </div> 
    <ul class="nav nav-pills"> 
     <li class="text-uppercase"> <a href="/gamebuino/meta-api-reference-en/"> META API Reference</a></li> 
     <li class="text-uppercase"> <a href="/gamebuino/academy-fr/"> Academy (FR)</a></li> 
    </ul> 
   </nav> 
   <div class="container" id="main-content">
    <div class="container"> 
     <div class="d-flex align-items-center"> <a href="/gamebuino/academy-fr/" > Académie </a> 
      <div class="ml-3 mr-3"> <i class="fal fa-angle-right"></i> 
      </div> <a href="/gamebuino/academy-fr/make-your-very-first-games-with-pong.html"> Pong (C++ 2/5) </a> 
      <div class="ml-3 mr-3"> <i class="fal fa-angle-right"></i> 
      </div> <span> Balle rebondissante </span> 
     </div> 
    </div> 
    <div class="row"> 
     <div class="col-md-8"> 
      <div class="d-flex justify-content-between"> 
       <div> 
        <h1> Balle rebondissante </h1> 
        <h5> Étape 2 </h5> 
       </div> 
      </div> 
      <div class="mt-5 white-container"> 
       <div class="lesson-introduction"> 
        <p>Donnez vie à votre jeu avec une balle qui rebondit contre les bords de l'écran</p> 
        <ul> 
         <li>Conditions "If else"</li> 
         <li>Utiliser les variables pour créer le mouvement</li> 
         <li>Vérifier les collisions</li> 
         <li>Faire rebondir !</li> 
        </ul> 
       </div> 
       <div class="lesson-content mt-5"> 
        <p>Cette fois ça prend vie, <strong>votre programme bouge tout seul</strong> ! Les prémices de votre jeu de raquettes sont là.</p> 
        <h2>Boïng boïng, ça rebondit de partout</h2> 
        <p><strong>Durée</strong> 20 minutes (et plus si affinité)</p> 
        <ul> 
         <li>Avoir une <span>Gamebuino META</span> </li> 
         <li>Avoir fait l'Atelier<span> Installation de la Gamebuino META</span> </li> 
         <li>Avoir fait les Ateliers <span>hello, world</span> et <span>compteur d'invités</span> </li> 
        </ul> 
        <p>A l'étape précédente vous avez fait un compteur d'invités. Vous stockiez sa valeur dans une <strong>variable</strong> de <strong>type</strong> <code>int</code> qu'on avait décidé d'appeler<code>counter</code> (logique !). On avait des <strong>conditions</strong> <code>if</code> pour changer la valeur du compteur lorsque l'on appuyait sur les boutons. Et finalement, on affichait un rectangle dont la position dépendait de la valeur de notre <strong>variable</strong>.</p> 
        <p>Si on résume, <strong>vous faisiez bouger un rectangle à l'écran en appuyant sur les boutons</strong>. On n'est pas loin d'avoir une raquette de pong ;) Mais un Pong sans balle c'est pas bien fun, c'est pourquoi on va maintenant faire une balle rebondissante.</p> 
        <h2>Aller de l'avant</h2> 
        <p>Dans le cas de notre balle rebondissante, il serait plus approprié d'appeler la variable <code>positionX</code> que <code>counter</code>, pour mieux refléter ce à quoi elle sert : stocker la position de la balle suivant l'axe horizontal X. On en profite pour ajouter une variable <code>speedX</code> qui va servir à stocker la vitesse horizontale de la balle.</p> 
        <p>Ensuite, la balle va avancer d'elle-même, pas besoin de <strong>condition</strong> <code>if</code> avec les boutons. On aurait donc quelque chose comme ça.</p> 
        <pre><code>#include &lt;Gamebuino-Meta.h&gt;

int positionX = 32;
int speedX = 1;

void setup() {
  gb.begin();

}

void loop() {
  while (!gb.update());
  gb.display.clear();

  positionX = positionX + speedX;

  gb.display.print("positionX: ");
  gb.display.print(positionX);
  gb.display.print("\nspeedX: ");
  gb.display.print(speedX);

  gb.display.fillRect(positionX, 32, 4, 4);
}
</code></pre> 
        <p><img src="../assets/d02bc7292dc489bd8573d5b40b404ff095b6df93.gif" alt="" style="max-width:100%"></p> 
        <h2>À propos de l'écran</h2> 
        <p><img src="../assets/981ed2340a29dbab19a5acc525e9abad9577172a.PNG" alt="" style="max-width:100%"></p> 
        <p>Quand vous avez appris à utiliser un graphique, vous avez sûrement vu quelque chose comme ça, où le centre est là où X et Y sont nuls, et les X et Y grandissent quand on se déplace vers le haut et vers la droite. Mais pour les écrans, ça ne marche pas tout à fait comme ça. <img src="../assets/bf710a265997cf56917cd09b3de09609fcc59c2f.png" alt="" style="max-width:100%"></p> 
        <p>Les coordonnées sur l'écran de la Gamebuino META, comme n'importe quel autre écran, commencent en haut à gauche. En plus, les valeurs selon l'axe Y augmentent quand on <strong>descend</strong> (selon l'axe X, les valeurs augmentent vers la droite, comme sur un graphique classique).</p> 
        <p>Donc le coin à l'opposé - en bas à droite - a pour coordonnées (<code>gb.display.width() - 1, gb.display.height() - 1</code>).</p> 
        <p>Mais pourquoi est ce qu'on a soustrait 1 pour obtenir le coin en bas à droite ? C'est parce que le premier pixel (en haut à gauche) est en position (0, 0), et non en position (1, 1). Pour mieux comprendre pourquoi ce fait change tout, imaginons que notre écran avait seulement 4 pixels et que le premier avait comme coordonnée 0. Dans ce cas, quel serait la coordonnée du 4ème (dernier) pixel? <img src="../assets/a4eb88d4d0ee1599c849710b1996b5622e26bd54.png" alt="" style="max-width:100%"></p> 
        <p>Ici, on voit facilement que le dernier pixel a une coordonnée de 3, et non de 4. Eh bien la même chose se passe avec l'écran de la Gamebuino ! Les pixels de droite ont une coordonnée X égale à <code>gb.display.width() - 1</code>. De la même manière, les pixels du bas ont une coordonnée Y de <code>gb.display.height() - 1</code>.</p> 
        <p>Remarque : L'écran fait <strong>80 pixels de large par 64 pixels de haut</strong>. Vous pouvez vérifier la largeur avec <code>gb.display.print(gb.display.width());</code> ou en comptant ;). Cependant, même si vous connaissez les dimensions de l'écran, il ne faut pas écrire <code>80</code> là où on peut mettre <code>gb.display.width()</code>, car c'est moins explicite et est une sorte d'<span>offuscation</span> légère.</p> 
        <p>Puisque nous parlons de l'écran de positionnement, j'en profite pour approfondir l'utilisation de<code>gb.display.drawRect()</code>. Voici sa structure (que l'on a déjà vu) :</p> 
        <p><code>gb.display.drawRect(int x, int y, int largeur, int hauteur);</code> <img src="../assets/1a5979a8aac5d6e2c69aa5937e3afc18420ba177.png" alt="" style="max-width:100%"> Tout comme l'écran, les <code>X</code> et <code>y</code> sont passés par paramètres. Ce sont les coordonnées du coin en <strong>haut à gauche</strong> de notre rectangle. Donc on peut calculer la position de l'angle en bas à droite, et on obtient <code>(x + largeur - 1, y + hauteur - 1</code>).</p> 
        <p>Maintenant que nous avons vu tout ça, essayez d'afficher la balle plus haute sur l'écran. Essayez aussi de l'afficher tout en bas de l'écran :)</p> 
        <h2>Garder la balle en vue</h2> 
        <p>Essayons notre petit jeu et voyons ce qu'il se passe... Hé, mais la balle ne s'arrête pas ! Normal, on n'a mis aucune <strong>condition</strong>. Elle continue donc d'avancer, même en dehors de l'écran. Comment est-ce qu'on pourrait faire pour corriger ça ? Voilà la logique à avoir, en pseudo-code:</p> 
        <pre><code>Si la balle atteint le bord droit
Alors aller à gauche
Si la balle atteint le bord gauche
Alors aller à droite
</code></pre> 
        <p>Deux questions se posent alors...</p> 
        <ul> 
         <li>Comment faire pour que la balle aille à gauche ?</li> 
         <li>Comment savoir quand on a atteint le bord de l'écran ?</li> 
        </ul> 
        <p>Je vais vous donner la solution, mais vous devriez essayer d'y réfléchir un peu avant de regarder. Quelques indices : essayez de jouer avec la valeur de <code>speedX</code> pour faire varier la vitesse. Qu'est ce qui se passe avec une vitesse de 2, de 3 ? Une vitesse négative ?</p> 
        <p>Maintenant que vous avez trouvé le truc pour faire aller la balle à gauche (n'est-ce pas ?), vous n'avez plus qu'à détecter quand <code>positionX</code> atteint le bord de l'écran. Les coordonnées horizontales en X peuvent varier de<code>0</code> à <code>gb.display.width()</code>. Une valeur de 0 correspond au bord gauche de l'écran et une valeur de <code>gb.display.width()</code> correspond au bord droit.</p> 
        <p>Vous avez maintenant tous les éléments pour faire rebondir la balle de gauche à droite :)</p> 
        <p>Si vous bloquez, voilà un coup de pouce.</p> 
        <pre><code>#include &lt;Gamebuino-Meta.h&gt;

int positionX = 32;
int speedX = 1;

void setup() {
  gb.begin();

}

void loop() {
  while (!gb.update());
  gb.display.clear();

  positionX = positionX + speedX;

  // Si la balle atteint ou dépasse le bord gauche
  if(positionX &lt; 0){
    // On part à droite
    speedX = 1;
  }

  // Si la balle atteint ou dépasse le bord droit
  if(positionX &gt; gb.display.width()){
    // On part à gauche
    speedX = -1;
  }

  gb.display.print("positionX: ");
  gb.display.print(positionX);
  gb.display.print("\nspeedX: ");
  gb.display.print(speedX);

  gb.display.fillRect(positionX, 32, 4, 4);
}
</code></pre> 
        <h2>À vous de jouer !</h2> 
        <p>Si la balle ne bouge qu'à l'horizontal, ça ne va pas être très excitant comme partie de Pong. Pourquoi ne pas créer de nouvelles variables <code>positionY</code> et <code>speedY</code> pour permettre à la balle de bouger verticalement ? Il faudra aussi des conditions pour détecter le bord de l'écran, cette fois avec <code>gb.display.height()</code> qui donne la hauteur de l'écran.</p> 
        <p><strong>Faites nous rêver sur les réseaux sociaux avec #gamebuino #bouncingball , on vous suit de près ;)</strong></p> 
        <h2>Exemple de solution</h2> 
        <p>Si vous êtes en panne d'inspiration, voilà ce qu'on a fait de notre côté :) <img src="../assets/cefce1ae43bed65c740dd2530a7305b5f8d6b6f5.gif" alt="" style="max-width:100%"></p> 
        <pre><code>#include &lt;Gamebuino-Meta.h&gt; 

 




int positionX = 32;
int speedX = 2;
int positionY = 32;
int speedY = 1;
int ballSize = 8;




void setup() {
  gb.begin();




}




void loop() {
  while (!gb.update());
  gb.display.clear();




  // Mise à jour de la position horizontale
  positionX = positionX + speedX;




  // Si la balle atteint le bord gauche
  if(positionX &lt; 0){
    // On part à droite
    speedX = 2;
  }




  // Si la balle atteint le bord droit
  if(positionX &gt; gb.display.width() - ballSize){
    // On part à droite
    speedX = -2;
  }




  // Mise à jour de la position verticale
  positionY = positionY + speedY;




    // Si la balle atteint le bord haut
  if(positionY &lt; 0){
    // On part en bas
    speedY = 1;
  }




  // Si la balle atteint le bord bas
  if(positionY &gt; gb.display.height() - ballSize){
    // On part en haut
    speedY = -1;
  }




  gb.display.setColor(BROWN);
  gb.display.print("positionX: ");
  gb.display.print(positionX);
  gb.display.print("\nspeedX: ");
  gb.display.print(speedX);




  gb.display.print("\npositionY: ");
  gb.display.print(positionY);
  gb.display.print("\nspeedY: ");
  gb.display.print(speedY);




  gb.display.setColor(WHITE);
  gb.display.fillRect(positionX, positionY, ballSize, ballSize);
}
</code></pre>
        <p><a href="/gamebuino/academy-fr/pong.html" title="Pong" class="btn btn-primary btn-lg"> Etape suivante <i class="fa fa-arrow-right"></i></a></p> 
       </div> 
      </div> 
     </div> 
     <div class="col-md-4 d-none d-md-block"> 
      <ul class="workshop-summary-mini"> 
       <li class=""> <a href="/gamebuino/academy-fr/hello-world.html" class="d-flex align-items-center  "> 
         <div class="circle">
           1 
         </div> 
         <div class="title ml-3">
           Hello, world 
         </div> </a></li> 
       <li class=""> <a href="/gamebuino/academy-fr/tally-counter.html" class="d-flex align-items-center  "> 
         <div class="circle">
           2 
         </div> 
         <div class="title ml-3">
           Compteur d'invités 
         </div> </a></li> 
       <li class=""> <a href="/gamebuino/academy-fr/bouncing-ball.html" class="d-flex align-items-center  active  "> 
         <div class="circle">
           3 
         </div> 
         <div class="title ml-3">
           Balle rebondissante 
         </div> </a></li> 
       <li class=""> <a href="/gamebuino/academy-fr/pong.html" class="d-flex align-items-center  "> 
         <div class="circle">
           4 
         </div> 
         <div class="title ml-3">
           Pong 
         </div> </a></li> 
       <li class=""> <a href="/gamebuino/academy-fr/artificial-intelligence.html" class="d-flex align-items-center  "> 
         <div class="circle">
           5 
         </div> 
         <div class="title ml-3">
           Intelligence artificielle 
         </div> </a></li> 
      </ul> 
     </div> 
    </div> 
    <div class="d-block d-md-none" style="margin-top:8rem"> 
     <h4 class="mb-4">Étapes</h4> 
     <ul class="workshop-summary-mini"> 
      <li class=""> <a href="/gamebuino/academy-fr/hello-world.html" class="d-flex align-items-center  "> 
        <div class="circle">
          1 
        </div> 
        <div class="title ml-3">
          Hello, world 
        </div> </a></li> 
      <li class=""> <a href="/gamebuino/academy-fr/tally-counter.html" class="d-flex align-items-center  "> 
        <div class="circle">
          2 
        </div> 
        <div class="title ml-3">
          Compteur d'invités 
        </div> </a></li> 
      <li class=""> <a href="/gamebuino/academy-fr/bouncing-ball.html" class="d-flex align-items-center  active  "> 
        <div class="circle">
          3 
        </div> 
        <div class="title ml-3">
          Balle rebondissante 
        </div> </a></li> 
      <li class=""> <a href="/gamebuino/academy-fr/pong.html" class="d-flex align-items-center  "> 
        <div class="circle">
          4 
        </div> 
        <div class="title ml-3">
          Pong 
        </div> </a></li> 
      <li class=""> <a href="/gamebuino/academy-fr/artificial-intelligence.html" class="d-flex align-items-center  "> 
        <div class="circle">
          5 
        </div> 
        <div class="title ml-3">
          Intelligence artificielle 
        </div> </a></li> 
     </ul> 
    </div>
   </div> 
   <footer id="footer"> 
    <div class="container"> 
     <div class="reinsurance"> 
      <div class="row align-items-center"> 
       <div class="col-sm-3"> 
        <p class="text-left"></p> 
       </div> 
       <div class="col-sm-6"> 
        <p class="text-center">Academy saved on October 8, 2020</p> 
       </div> 
       <div class="col-sm-3"> 
        <p class="text-right"></p> 
       </div> 
      </div> 
     </div> 
     <div class="row"> 
      <div class="col-sm-4 margeur-50"> 
       <ul class=""> 
        <li class="margeur-20"><h5 style="color:white;">Exported by :</h5></li> 
        <li> <a href="https://chris-scientist.github.io">chris-scientist</a></li> 
       </ul> 
      </div> 
      <div class="col-sm-4 margeur-50"> 
       <ul class=""> 
        <li class="margeur-10"> <a href="/gamebuino/why-this-website/">Why this website ?</a></li> 
        <li class="margeur-10"> <a href="/gamebuino/contact/">Contact</a></li> 
       </ul> 
      </div> 
      <div class="col-sm-4 margeur-50"> 
       <h6 class="footer-h6">Exported from official website</h6> 
      </div> 
     </div> 
    </div> 
   </footer>  
  </div>
 </body>
</html>